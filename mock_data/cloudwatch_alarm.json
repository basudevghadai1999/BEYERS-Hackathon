{
  "alarm_name": "checkout-service-p99-latency-critical",
  "alarm_description": "Checkout Service p99 latency exceeds 2000ms for 2 consecutive datapoints",
  "namespace": "Bayer/CheckoutService",
  "metric_name": "p99_latency_ms",
  "statistic": "p99",
  "period": 60,
  "evaluation_periods": 2,
  "threshold": 2000,
  "comparison_operator": "GreaterThanThreshold",
  "treat_missing_data": "notBreaching",
  "dimensions": [
    { "Name": "ServiceName", "Value": "checkout-service" },
    { "Name": "Environment", "Value": "production" }
  ],
  "alarm_actions": [
    "arn:aws:sns:us-east-1:123456789012:aic-incident-trigger"
  ],
  "mock_state_history": [
    { "timestamp": "2026-02-06T14:00:00Z", "state": "OK",    "reason": "Threshold Crossed: 1 datapoint [180.0] was not greater than the threshold (2000.0)" },
    { "timestamp": "2026-02-06T14:15:00Z", "state": "OK",    "reason": "Threshold Crossed: 1 datapoint [450.0] was not greater than the threshold (2000.0)" },
    { "timestamp": "2026-02-06T14:25:00Z", "state": "OK",    "reason": "Threshold Crossed: 1 datapoint [1850.0] was not greater than the threshold (2000.0). Watching for 2 consecutive." },
    { "timestamp": "2026-02-06T14:30:00Z", "state": "ALARM", "reason": "Threshold Crossed: 2 datapoints [2100.0, 2300.0] were greater than the threshold (2000.0)" }
  ],
  "mock_alarm_event": {
    "version": "0",
    "id": "a1b2c3d4-5678-90ab-cdef-EXAMPLE11111",
    "detail-type": "CloudWatch Alarm State Change",
    "source": "aws.cloudwatch",
    "account": "123456789012",
    "time": "2026-02-06T14:30:00Z",
    "region": "us-east-1",
    "resources": [
      "arn:aws:cloudwatch:us-east-1:123456789012:alarm:checkout-service-p99-latency-critical"
    ],
    "detail": {
      "alarmName": "checkout-service-p99-latency-critical",
      "state": {
        "value": "ALARM",
        "reason": "Threshold Crossed: 2 datapoints [2100.0, 2300.0] were greater than the threshold (2000.0)",
        "reasonData": "{\"version\":\"1.0\",\"queryDate\":\"2026-02-06T14:30:00.000+0000\",\"startDate\":\"2026-02-06T14:28:00.000+0000\",\"statistic\":\"p99\",\"period\":60,\"recentDatapoints\":[2100.0,2300.0],\"threshold\":2000.0,\"evaluatedDatapoints\":[{\"timestamp\":\"2026-02-06T14:30:00.000+0000\",\"value\":2100.0},{\"timestamp\":\"2026-02-06T14:35:00.000+0000\",\"value\":2300.0}]}",
        "timestamp": "2026-02-06T14:30:00.000+0000"
      },
      "previousState": {
        "value": "OK",
        "reason": "Threshold Crossed: 1 datapoint [1850.0] was not greater than the threshold (2000.0)",
        "timestamp": "2026-02-06T14:25:00.000+0000"
      },
      "configuration": {
        "metrics": [
          {
            "id": "m1",
            "metricStat": {
              "metric": {
                "namespace": "Bayer/CheckoutService",
                "name": "p99_latency_ms",
                "dimensions": {
                  "ServiceName": "checkout-service",
                  "Environment": "production"
                }
              },
              "period": 60,
              "stat": "p99"
            }
          }
        ]
      }
    }
  }
}
